---
id: post-split-rule-managed
title: "Creation of a managed rule"
description: "Creation of a managed rule"
sidebar_label: "Creation of a managed rule"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: reference/transactions/btg-pactual-banking-as-a-service-transactions
custom_edit_url: null
proxy: https://proxy.writechoice.io/
---

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Creation of a managed rule"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/split/rule/managed"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Creation of a managed rule

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"description":"Payload for managed rule creation","content":{"application/json":{"schema":{"required":["clientRequestId","priority","splitters"],"type":"object","properties":{"clientRequestId":{"description":"The unique transaction identification given by the client side. This value can't be repeated.","type":"string","title":"ClientRequestId"},"description":{"nullable":true,"description":"Description of Managed Rule","type":"string"},"priority":{"format":"int32","description":"Rule priority over others when there are several that met the trigger filters.","type":"integer"},"triggers":{"description":"Trigger of rule.","type":"array","items":{"nullable":true,"description":"Settings that trigger rule processing to process splitters and create payment transactions.","required":["type"],"type":"object","properties":{"type":{"description":"Type of transaction that originated the cashin.","enum":["Paymentslip","PIX","Transfer"],"type":"string","title":"CspTriggerType"},"amountRange":{"description":"Amount range that will be used as a rule trigger filter. Based on cash in amount.","required":["maxAmount","minAmount"],"type":"object","properties":{"minAmount":{"format":"int64","description":"Minimun amount","type":"integer"},"maxAmount":{"format":"int64","description":"Maximum amount","type":"integer"}},"title":"CspAmountRange"},"taxId":{"nullable":true,"description":"TaxId referring to the sender of the cash in (if it exists)","type":"string"},"creditAccountId":{"nullable":true,"format":"uuid","description":"AccountId (BaaS Id) of cashin credit account","type":"string"},"debitAccount":{"description":"Account information referring to the sender of the cash in (if it exists)","required":["branch","account"],"type":"object","properties":{"account":{"description":"The account number.","type":"string"},"branch":{"description":"The branch number.","type":"string"},"bank":{"description":"The bank code.","type":"string"},"ispb":{"description":"ISPB (Brazilian Payments System Identifier) of the SPI (Instant Payments System) participant with numbers only.","type":"string"}},"title":"CspTriggerAccount"}},"title":"CspRuleTrigger"}},"splitters":{"description":"Splitters of rule.","type":"array","items":{"description":"Splitter Settings for creating a payment transaction.","required":["amountDefinition","order","type"],"type":"object","properties":{"type":{"description":"Type of payment transaction.","enum":["PIX","Transfer"],"type":"string","title":"CspSplitTransactionType"},"order":{"format":"int32","description":"Sequence order that the splitter will be processed. Important when \"allowPartiallyProcess\" is enabled for rule.","type":"integer"},"amountDefinition":{"description":"Definition of amount of payment transaction. Only one of the options (fixedAmount, percentile or remainderAmount) for this attribute must be defined.","type":"object","properties":{"fixedAmount":{"nullable":true,"format":"int64","description":"A fixed amount for creating the payment transaction derived from cash in. Format in cents. Example: 100 = R$1.00","type":"integer"},"percentile":{"nullable":true,"format":"double","description":"Percentile that will be used to calculate the value of the payment transaction derived from cash in. Format in decimal. Example: 0.15 = 15% (if the cash in value is R$100.00, the payment transaction will be R$15.00)","type":"number"},"remainderAmount":{"nullable":true,"description":"Defines that the payment transaction will be the remaining amount after processing the cash in split","type":"boolean"}},"title":"CspAmountDefinition"},"addDaysToPayment":{"format":"int32","description":"Number of days that will be added, based on the cash in processing date, to define the effective date of the payment transaction.","default":0,"type":"integer"},"disallowAggregation":{"description":"If \"true\" prevents the aggregation of payment transactions at the time of payment execution.","default":false,"type":"boolean"},"automaticApproval":{"description":"Defines whether the payment transaction generated by the splitter will be automatically approved.","default":false,"type":"boolean"},"creditAccount":{"description":"Credit account used for payment. (Required when the PIX key is null)","allOf":[{"required":["account","accountType","name","taxId"],"type":"object","properties":{"name":{"description":"The acocunt's name.","type":"string"},"taxId":{"description":"Tax Identification - CPF (11 digits formatted) or CNPJ (14 digits formatted), fill with zeros left of the number if necessary.","type":"string"},"accountType":{"description":"The account type (CACC = Current Account, SLRY = Salary Account, SVGS = Saving Account, TRAN = Transactional Account).","enum":["CACC","SLRY","SVGS","TRAN"],"type":"string","title":"CspAccountType"},"account":{"description":"The account number.","type":"string"},"branch":{"description":"The branch number.","type":"string"},"bank":{"description":"The bank code.","type":"string"},"ispb":{"description":"ISPB (Brazilian Payments System Identifier) of the SPI (Instant Payments System) participant with numbers only.","type":"string"}},"title":"CspCreditAccount"},{"type":"object"}],"title":"CspSplitterAccount"},"pixKey":{"nullable":true,"description":"PIX key used for payment. (Only when the payment type is PIX)","type":"string"}},"title":"CspRuleSplitter"}},"allowPartiallyProcess":{"description":"Defines whether the rule will be allowed to be processed even when the total amount of payment transactions generated by the splitters is greater than the cash in amount. Important: Payment transactions that exceed the total (according to the order) will be ignored.","type":"boolean"},"tags":{"nullable":true,"description":"Tags that can be sent by the client, it will be saved on the Entity, use as a metadata field","uniqueItems":true,"type":"array","items":{"type":"string"},"example":["tag1","tag2"],"title":"Tags"}},"example":{"clientRequestId":"CLIREQID-20190824-0000001","description":"Product 001 Sales","priority":1,"allowPartiallyProcess":false,"triggers":[{"type":"Paymentslip","amountRange":{"minAmount":0,"maxAmount":9000}},{"type":"PIX","taxId":"12345678901"},{"type":"Transfer","amountRange":{"minAmount":0,"maxAmount":999999999},"debitAccount":{"account":341987,"branch":146,"bank":341}}],"splitters":[{"type":"PIX","order":1,"amountDefinition":{"percentile":0.15},"addDaysToPayment":0,"disallowAggregation":false,"automaticApproval":false,"creditAccount":{"name":"Thomas A. Anderson","taxId":32176544561,"accountType":"CACC","account":321456,"branch":87,"bank":123,"ispb":98765432}},{"type":"Transfer","order":2,"amountDefinition":{"fixedAmount":1000},"addDaysToPayment":5,"disallowAggregation":true,"automaticApproval":false,"creditAccount":{"name":"John Wick","taxId":29876543212,"accountType":"CACC","account":654987,"branch":37,"bank":1}},{"type":"PIX","order":999,"amountDefinition":{"remainderAmount":true},"addDaysToPayment":0,"disallowAggregation":false,"automaticApproval":true,"pixKey":"09876543210"}],"tags":["tag1","tag2"]},"title":"CspManagedRuleRequest"}}}}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"201":{"content":{"application/json":{"schema":{"description":"Split Managed Rule Response","required":["body"],"allOf":[{"description":"BaaS Response API Envelope","required":["version","status"],"type":"object","properties":{"version":{"description":"The api version.","type":"string","example":"1.0.0"},"status":{"format":"int32","description":"The HTTP response code.","type":"integer","example":200}},"title":"ApiEnvelope"},{"type":"object","properties":{"body":{"description":"Split Managed Rule Entity","required":["body"],"allOf":[{"description":"BaaS Entity Envelope","required":["pactualId","clientRequestId","createTimestamp","lastUpdateTimestamp","status","entity"],"type":"object","properties":{"pactualId":{"format":"uuid","description":"Unique resource identificator (uuid) generated by api.","type":"string","title":"PactualId"},"clientRequestId":{"description":"The unique transaction identification given by the client side. This value can't be repeated.","type":"string","title":"ClientRequestId"},"createTimestamp":{"format":"date-time","description":"The string representation of the Timestamp that the record was created (UTC).","pattern":"yyyy-MM-ddTHH:mm:ssZ","type":"string","title":"CreateTimestamp"},"lastUpdateTimestamp":{"format":"date-time","description":"The string representation of the Timestamp that the record was last updated (UTC).","pattern":"yyyy-MM-ddTHH:mm:ssZ","type":"string","title":"LastUpdateTimestamp"},"status":{"description":"The operation status.","type":"string","title":"Status"},"entity":{"description":"Operation Contract Entity.","type":"string","title":"Entity"},"tags":{"nullable":true,"description":"Tags that can be sent by the client, it will be saved on the Entity, use as a metadata field","uniqueItems":true,"type":"array","items":{"type":"string"},"example":["tag1","tag2"],"title":"Tags"},"errorCode":{"description":"The error code.","type":"string","title":"ErrorCode"},"errorDescription":{"description":"The error description.","type":"string","title":"ErrorDescription"}},"title":"EntityEnvelope"},{"type":"object","properties":{"body":{"description":"Managed Rule Entity","required":["splitters","priority"],"type":"object","properties":{"description":{"nullable":true,"description":"Description of Managed Rule","type":"string"},"priority":{"format":"int32","description":"Rule priority over others when there are several that met the trigger filters.","type":"integer"},"triggers":{"description":"List of settings that trigger rule processing to process splitters and create payment transactions.","type":"array","items":{"nullable":true,"description":"Settings that trigger rule processing to process splitters and create payment transactions.","required":["type"],"type":"object","properties":{"type":{"description":"Type of transaction that originated the cashin.","enum":["Paymentslip","PIX","Transfer"],"type":"string","title":"CspTriggerType"},"amountRange":{"description":"Amount range that will be used as a rule trigger filter. Based on cash in amount.","required":["maxAmount","minAmount"],"type":"object","properties":{"minAmount":{"format":"int64","description":"Minimun amount","type":"integer"},"maxAmount":{"format":"int64","description":"Maximum amount","type":"integer"}},"title":"CspAmountRange"},"taxId":{"nullable":true,"description":"TaxId referring to the sender of the cash in (if it exists)","type":"string"},"creditAccountId":{"nullable":true,"format":"uuid","description":"AccountId (BaaS Id) of cashin credit account","type":"string"},"debitAccount":{"description":"Account information referring to the sender of the cash in (if it exists)","required":["branch","account"],"type":"object","properties":{"account":{"description":"The account number.","type":"string"},"branch":{"description":"The branch number.","type":"string"},"bank":{"description":"The bank code.","type":"string"},"ispb":{"description":"ISPB (Brazilian Payments System Identifier) of the SPI (Instant Payments System) participant with numbers only.","type":"string"}},"title":"CspTriggerAccount"}},"title":"CspRuleTrigger"}},"allowPartiallyProcess":{"description":"Defines whether the rule will be allowed to be processed even when the total amount of payment transactions generated by the splitters is greater than the cash in amount. Important: Payment transactions that exceed the total (according to the order) will be ignored.","default":false,"type":"boolean"},"splitters":{"description":"List of splitters settings for creating a payment transaction.","type":"array","items":{"description":"Splitter Settings for creating a payment transaction.","required":["amountDefinition","order","type"],"type":"object","properties":{"type":{"description":"Type of payment transaction.","enum":["PIX","Transfer"],"type":"string","title":"CspSplitTransactionType"},"order":{"format":"int32","description":"Sequence order that the splitter will be processed. Important when \"allowPartiallyProcess\" is enabled for rule.","type":"integer"},"amountDefinition":{"description":"Definition of amount of payment transaction. Only one of the options (fixedAmount, percentile or remainderAmount) for this attribute must be defined.","type":"object","properties":{"fixedAmount":{"nullable":true,"format":"int64","description":"A fixed amount for creating the payment transaction derived from cash in. Format in cents. Example: 100 = R$1.00","type":"integer"},"percentile":{"nullable":true,"format":"double","description":"Percentile that will be used to calculate the value of the payment transaction derived from cash in. Format in decimal. Example: 0.15 = 15% (if the cash in value is R$100.00, the payment transaction will be R$15.00)","type":"number"},"remainderAmount":{"nullable":true,"description":"Defines that the payment transaction will be the remaining amount after processing the cash in split","type":"boolean"}},"title":"CspAmountDefinition"},"addDaysToPayment":{"format":"int32","description":"Number of days that will be added, based on the cash in processing date, to define the effective date of the payment transaction.","default":0,"type":"integer"},"disallowAggregation":{"description":"If \"true\" prevents the aggregation of payment transactions at the time of payment execution.","default":false,"type":"boolean"},"automaticApproval":{"description":"Defines whether the payment transaction generated by the splitter will be automatically approved.","default":false,"type":"boolean"},"creditAccount":{"description":"Credit account used for payment. (Required when the PIX key is null)","allOf":[{"required":["account","accountType","name","taxId"],"type":"object","properties":{"name":{"description":"The acocunt's name.","type":"string"},"taxId":{"description":"Tax Identification - CPF (11 digits formatted) or CNPJ (14 digits formatted), fill with zeros left of the number if necessary.","type":"string"},"accountType":{"description":"The account type (CACC = Current Account, SLRY = Salary Account, SVGS = Saving Account, TRAN = Transactional Account).","enum":["CACC","SLRY","SVGS","TRAN"],"type":"string","title":"CspAccountType"},"account":{"description":"The account number.","type":"string"},"branch":{"description":"The branch number.","type":"string"},"bank":{"description":"The bank code.","type":"string"},"ispb":{"description":"ISPB (Brazilian Payments System Identifier) of the SPI (Instant Payments System) participant with numbers only.","type":"string"}},"title":"CspCreditAccount"},{"type":"object"}],"title":"CspSplitterAccount"},"pixKey":{"nullable":true,"description":"PIX key used for payment. (Only when the payment type is PIX)","type":"string"}},"title":"CspRuleSplitter"}}},"example":{"description":"Product 001 Sales","priority":1,"allowPartiallyProcess":false,"triggers":[{"type":"Paymentslip","amountRange":{"minAmount":0,"maxAmount":9000}},{"type":"PIX","taxId":"12345678901"},{"type":"Transfer","amountRange":{"minAmount":0,"maxAmount":999999999},"debitAccount":{"account":341987,"branch":146,"bank":341}}],"splitters":[{"type":"PIX","order":1,"amountDefinition":{"percentile":0.15},"addDaysToPayment":0,"disallowAggregation":false,"automaticApproval":false,"creditAccount":{"name":"Thomas A. Anderson","taxId":32176544561,"accountType":"CACC","account":321456,"branch":87,"bank":123,"ispb":98765432}},{"type":"Transfer","order":2,"amountDefinition":{"fixedAmount":1000},"addDaysToPayment":5,"disallowAggregation":true,"automaticApproval":false,"creditAccount":{"name":"John Wick","taxId":29876543212,"accountType":"CACC","account":654987,"branch":37,"bank":1}},{"type":"PIX","order":999,"amountDefinition":{"remainderAmount":true},"addDaysToPayment":0,"disallowAggregation":false,"automaticApproval":true,"pixKey":"09876543210"}]},"title":"CspManagedRule"}}}],"example":{"pactualId":"023297b6-c810-45cf-b879-c25f92ccce8f","clientRequestId":"CLIREQID-20190824-0000001","createTimestamp":"2019-08-24T14:15:22Z","lastUpdateTimestamp":"2019-08-24T14:15:22Z","status":"ENABLED","entity":"CashinSplitManagedRule","tags":["tag1","tag2"],"body":{"description":"Product 001 Sales","priority":1,"allowPartiallyProcess":false,"triggers":[{"type":"Paymentslip","amountRange":{"minAmount":0,"maxAmount":9000}},{"type":"PIX","taxId":"12345678901"},{"type":"Transfer","amountRange":{"minAmount":0,"maxAmount":999999999},"debitAccount":{"account":341987,"branch":146,"bank":341}}],"splitters":[{"type":"PIX","order":1,"amountDefinition":{"percentile":0.15},"addDaysToPayment":0,"disallowAggregation":false,"automaticApproval":false,"creditAccount":{"name":"Thomas A. Anderson","taxId":32176544561,"accountType":"CACC","account":321456,"branch":87,"bank":123,"ispb":98765432}},{"type":"Transfer","order":2,"amountDefinition":{"fixedAmount":1000},"addDaysToPayment":5,"disallowAggregation":true,"automaticApproval":false,"creditAccount":{"name":"John Wick","taxId":29876543212,"accountType":"CACC","account":654987,"branch":37,"bank":1}},{"type":"PIX","order":999,"amountDefinition":{"remainderAmount":true},"addDaysToPayment":0,"disallowAggregation":false,"automaticApproval":true,"pixKey":"09876543210"}]}},"title":"CspManagedRuleEntityEnvelope"}}}],"title":"CspManagedRuleEntityEnvelopeSucessApiResponseEnvelope"}}},"description":"Created"},"400":{"content":{"application/json":{"schema":{"title":"PactualErrorResponse","description":"Default response body in case of any errors.","type":"object","properties":{"version":{"description":"Api version.","type":"string"},"status":{"description":"Http status code.","type":"string"},"errors":{"description":"Array of errors.","type":"array","items":{"type":"object","properties":{"errorCode":{"type":"string"},"message":{"type":"string"}}}}},"example":{"version":"1.0.0","status":400,"errors":[{"errorCode":"PCE001","message":"The field 'name' is required."},{"errorCode":"PCE002","message":"The field 'taxId' is incorrect."}]}},"examples":{"BadRequestExample":{"value":{"version":"1.0.0","status":400,"errors":[{"errorCode":"PCE001","message":"The field 'name' is mandatory."},{"errorCode":"PCE001","message":"The field 'accountNumber' is mandatory."}]}}}}},"description":"A BadRequest response."},"401":{"description":"Response when a request is not athorized for the user."},"404":{"content":{"application/json":{"schema":{"title":"PactualErrorResponse","description":"Default response body in case of any errors.","type":"object","properties":{"version":{"description":"Api version.","type":"string"},"status":{"description":"Http status code.","type":"string"},"errors":{"description":"Array of errors.","type":"array","items":{"type":"object","properties":{"errorCode":{"type":"string"},"message":{"type":"string"}}}}},"example":{"version":"1.0.0","status":400,"errors":[{"errorCode":"PCE001","message":"The field 'name' is required."},{"errorCode":"PCE002","message":"The field 'taxId' is incorrect."}]}},"examples":{"NotFoundExample":{"value":{"version":"1.0.0","status":404}}}}},"description":"A NotFound response."},"500":{"content":{"application/json":{"schema":{"title":"PactualErrorResponse","description":"Default response body in case of any errors.","type":"object","properties":{"version":{"description":"Api version.","type":"string"},"status":{"description":"Http status code.","type":"string"},"errors":{"description":"Array of errors.","type":"array","items":{"type":"object","properties":{"errorCode":{"type":"string"},"message":{"type":"string"}}}}},"example":{"version":"1.0.0","status":400,"errors":[{"errorCode":"PCE001","message":"The field 'name' is required."},{"errorCode":"PCE002","message":"The field 'taxId' is incorrect."}]}},"examples":{"InternalServerErrorExample":{"value":{"version":"1.0.0","status":500,"errors":[{"errorCode":"PIE001","message":"Internal server error"}]}}}}},"description":"Internal server error responses."}}}
>
  
</StatusCodes>


      